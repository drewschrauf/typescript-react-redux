version: '3'
services:
  test:
    build:
      context: ../..
      dockerfile: test/docker/test.Dockerfile
    links:
      - web
      - selenium
  web:
    build:
      context: ../..
      dockerfile: test/docker/web.Dockerfile
    expose:
      - 80
  selenium:
    image: selenium/standalone-chrome
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost"]
      interval: 10s
      timeout: 10s
      retries: 3
    expose:
      - 4444
